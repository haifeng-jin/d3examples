var data = {"networks": [{"node_list": [64, 64, 64], "skip_list": []}, {"node_list": [64, 64, 64, 64, 64, 64, 64], "skip_list": [{"from": 1, "to": 3, "type": "add"}, {"from": 3, "to": 5, "type": "add"}, {"from": 5, "to": 7, "type": "add"}]}, {"node_list": [64, 128, 64, 64], "skip_list": [{"from": 1, "to": 2, "type": "concat"}, {"from": 1, "to": 2, "type": "add"}, {"from": 1, "to": 3, "type": "add"}, {"from": 2, "to": 3, "type": "add"}]}, {"node_list": [64, 128, 64, 64, 64], "skip_list": [{"from": 1, "to": 2, "type": "concat"}, {"from": 1, "to": 4, "type": "add"}, {"from": 2, "to": 4, "type": "concat"}]}, {"node_list": [64, 64, 128, 128, 64, 64], "skip_list": [{"from": 1, "to": 4, "type": "add"}, {"from": 2, "to": 4, "type": "concat"}, {"from": 3, "to": 5, "type": "concat"}, {"from": 4, "to": 5, "type": "concat"}]}, {"node_list": [128, 64, 64, 64], "skip_list": [{"from": 1, "to": 3, "type": "concat"}, {"from": 1, "to": 3, "type": "add"}]}, {"node_list": [128, 128, 128, 64, 64, 64], "skip_list": [{"from": 1, "to": 3, "type": "add"}, {"from": 1, "to": 5, "type": "concat"}]}, {"node_list": [64, 64, 128, 64, 64, 64], "skip_list": [{"from": 1, "to": 2, "type": "add"}, {"from": 2, "to": 3, "type": "concat"}, {"from": 3, "to": 4, "type": "concat"}, {"from": 3, "to": 4, "type": "add"}, {"from": 4, "to": 5, "type": "add"}]}, {"node_list": [64, 64, 64, 64, 64, 64, 64], "skip_list": [{"from": 1, "to": 5, "type": "add"}, {"from": 1, "to": 6, "type": "add"}, {"from": 2, "to": 6, "type": "add"}, {"from": 3, "to": 4, "type": "add"}, {"from": 3, "to": 6, "type": "add"}]}], "tree": {"name": 0, "children": [{"name": 1, "children": []}, {"name": 2, "children": []}, {"name": 3, "children": []}, {"name": 4, "children": []}, {"name": 5, "children": []}, {"name": 6, "children": []}, {"name": 7, "children": []}, {"name": 8, "children": []}]}};

data = {"networks": [{"node_list": [64, 64, 64], "skip_list": []}, {"node_list": [64, 64, 64, 64, 64, 64, 64], "skip_list": [{"from": 1, "to": 2, "type": "add"}, {"from": 2, "to": 5, "type": "add"}, {"from": 5, "to": 7, "type": "add"}]}, {"node_list": [64, 128, 64], "skip_list": [{"from": 1, "to": 2, "type": "concat"}, {"from": 1, "to": 2, "type": "add"}]}, {"node_list": [64, 64, 64, 64], "skip_list": [{"from": 1, "to": 2, "type": "add"}, {"from": 1, "to": 3, "type": "add"}]}, {"node_list": [64, 256, 256, 128, 64], "skip_list": [{"from": 1, "to": 4, "type": "concat"}, {"from": 1, "to": 4, "type": "add"}, {"from": 2, "to": 3, "type": "add"}]}, {"node_list": [64, 64, 64, 64, 128, 64], "skip_list": [{"from": 1, "to": 2, "type": "add"}, {"from": 4, "to": 5, "type": "concat"}, {"from": 4, "to": 5, "type": "add"}]}, {"node_list": [256, 256, 256, 128, 128, 64], "skip_list": [{"from": 3, "to": 5, "type": "concat"}, {"from": 3, "to": 5, "type": "add"}, {"from": 4, "to": 5, "type": "add"}]}, {"node_list": [64, 64, 64, 128, 128, 64, 64, 64, 64], "skip_list": [{"from": 3, "to": 5, "type": "concat"}, {"from": 3, "to": 5, "type": "add"}, {"from": 3, "to": 8, "type": "add"}]}, {"node_list": [64, 64, 64, 64, 64, 128, 128, 128, 64], "skip_list": [{"from": 5, "to": 8, "type": "concat"}, {"from": 5, "to": 8, "type": "add"}]}, {"node_list": [64, 64, 128, 64, 64], "skip_list": [{"from": 2, "to": 3, "type": "concat"}, {"from": 2, "to": 3, "type": "add"}, {"from": 2, "to": 4, "type": "add"}]}, {"node_list": [64, 64, 256, 128, 128, 64], "skip_list": [{"from": 2, "to": 3, "type": "concat"}, {"from": 2, "to": 5, "type": "concat"}, {"from": 2, "to": 5, "type": "add"}]}, {"node_list": [64, 64, 128, 128, 128, 128, 64], "skip_list": [{"from": 2, "to": 5, "type": "concat"}, {"from": 2, "to": 5, "type": "add"}, {"from": 5, "to": 6, "type": "concat"}]}, {"node_list": [64, 128, 256, 64, 64, 64], "skip_list": [{"from": 1, "to": 3, "type": "concat"}, {"from": 1, "to": 3, "type": "add"}, {"from": 3, "to": 5, "type": "concat"}]}, {"node_list": [64, 128, 128, 64], "skip_list": [{"from": 1, "to": 2, "type": "concat"}, {"from": 1, "to": 3, "type": "concat"}, {"from": 1, "to": 3, "type": "add"}]}, {"node_list": [64, 128, 128, 128, 128, 128, 128, 64], "skip_list": [{"from": 1, "to": 2, "type": "concat"}, {"from": 1, "to": 7, "type": "concat"}, {"from": 1, "to": 7, "type": "add"}]}, {"node_list": [64, 64, 128, 128, 64], "skip_list": [{"from": 2, "to": 4, "type": "concat"}, {"from": 2, "to": 4, "type": "add"}]}, {"node_list": [64, 128, 256, 256, 64, 64], "skip_list": [{"from": 1, "to": 2, "type": "concat"}, {"from": 1, "to": 5, "type": "add"}, {"from": 2, "to": 4, "type": "concat"}, {"from": 2, "to": 4, "type": "add"}]}, {"node_list": [64, 256, 512, 256, 256, 256, 64], "skip_list": [{"from": 1, "to": 6, "type": "concat"}, {"from": 1, "to": 6, "type": "add"}, {"from": 2, "to": 6, "type": "add"}]}, {"node_list": [64, 512, 512, 256, 512, 512, 64], "skip_list": [{"from": 1, "to": 4, "type": "concat"}, {"from": 1, "to": 6, "type": "concat"}, {"from": 1, "to": 6, "type": "add"}, {"from": 2, "to": 6, "type": "add"}]}, {"node_list": [64, 128, 128, 128, 128, 64, 64, 64, 64], "skip_list": [{"from": 1, "to": 5, "type": "concat"}, {"from": 1, "to": 5, "type": "add"}, {"from": 7, "to": 8, "type": "add"}]}, {"node_list": [64, 128, 128, 128, 128, 64], "skip_list": [{"from": 1, "to": 4, "type": "concat"}, {"from": 1, "to": 5, "type": "concat"}, {"from": 1, "to": 5, "type": "add"}]}, {"node_list": [64, 128, 64, 256, 64], "skip_list": [{"from": 1, "to": 2, "type": "concat"}, {"from": 3, "to": 4, "type": "concat"}, {"from": 3, "to": 4, "type": "add"}]}, {"node_list": [256, 256, 128, 128, 128, 128, 64], "skip_list": [{"from": 1, "to": 2, "type": "concat"}, {"from": 2, "to": 6, "type": "concat"}, {"from": 5, "to": 6, "type": "concat"}, {"from": 5, "to": 6, "type": "add"}]}, {"node_list": [64, 128, 128, 128, 64, 64], "skip_list": [{"from": 1, "to": 4, "type": "concat"}, {"from": 1, "to": 4, "type": "add"}, {"from": 1, "to": 5, "type": "add"}, {"from": 4, "to": 5, "type": "concat"}]}, {"node_list": [64, 64, 128, 512, 512, 512, 512, 64, 64], "skip_list": [{"from": 1, "to": 7, "type": "concat"}, {"from": 2, "to": 7, "type": "concat"}, {"from": 2, "to": 7, "type": "add"}]}, {"node_list": [64, 64, 512, 128, 128, 128, 128, 64], "skip_list": [{"from": 2, "to": 7, "type": "concat"}, {"from": 2, "to": 7, "type": "add"}, {"from": 3, "to": 6, "type": "concat"}, {"from": 5, "to": 7, "type": "add"}]}, {"node_list": [64, 64, 256, 256, 256, 512, 64], "skip_list": [{"from": 2, "to": 5, "type": "concat"}, {"from": 2, "to": 6, "type": "concat"}, {"from": 2, "to": 6, "type": "add"}, {"from": 5, "to": 6, "type": "add"}]}, {"node_list": [64, 128, 128, 128, 128, 256, 64], "skip_list": [{"from": 1, "to": 6, "type": "concat"}, {"from": 1, "to": 6, "type": "add"}]}, {"node_list": [128, 128, 128, 128, 128, 128, 128, 64], "skip_list": [{"from": 1, "to": 3, "type": "add"}, {"from": 1, "to": 7, "type": "add"}, {"from": 3, "to": 7, "type": "concat"}, {"from": 3, "to": 7, "type": "add"}]}, {"node_list": [64, 128, 64, 64, 128, 128, 128, 64], "skip_list": [{"from": 2, "to": 4, "type": "add"}, {"from": 4, "to": 6, "type": "concat"}, {"from": 6, "to": 7, "type": "concat"}, {"from": 6, "to": 7, "type": "add"}]}, {"node_list": [64, 512, 128, 128, 64, 64], "skip_list": [{"from": 1, "to": 4, "type": "concat"}, {"from": 1, "to": 4, "type": "add"}, {"from": 1, "to": 5, "type": "add"}]}, {"node_list": [256, 64, 512, 256, 256, 64], "skip_list": [{"from": 1, "to": 2, "type": "add"}, {"from": 2, "to": 5, "type": "concat"}, {"from": 2, "to": 5, "type": "add"}, {"from": 3, "to": 5, "type": "add"}]}, {"node_list": [64, 64, 64, 128, 64], "skip_list": [{"from": 1, "to": 3, "type": "add"}, {"from": 1, "to": 4, "type": "concat"}, {"from": 3, "to": 4, "type": "concat"}, {"from": 3, "to": 4, "type": "add"}]}, {"node_list": [128, 128, 128, 64], "skip_list": [{"from": 1, "to": 2, "type": "concat"}, {"from": 1, "to": 2, "type": "add"}, {"from": 1, "to": 3, "type": "add"}, {"from": 2, "to": 3, "type": "concat"}]}, {"node_list": [64, 128, 256, 64, 64, 64, 64, 64], "skip_list": [{"from": 1, "to": 3, "type": "concat"}, {"from": 1, "to": 3, "type": "add"}, {"from": 1, "to": 5, "type": "add"}, {"from": 3, "to": 7, "type": "concat"}, {"from": 5, "to": 6, "type": "add"}]}, {"node_list": [128, 256, 128, 128, 128, 128, 64], "skip_list": [{"from": 2, "to": 5, "type": "concat"}, {"from": 2, "to": 5, "type": "add"}, {"from": 2, "to": 6, "type": "add"}, {"from": 5, "to": 6, "type": "concat"}, {"from": 5, "to": 6, "type": "add"}]}, {"node_list": [128, 128, 128, 128, 256, 128, 128, 64], "skip_list": [{"from": 2, "to": 5, "type": "concat"}, {"from": 2, "to": 4, "type": "add"}, {"from": 2, "to": 5, "type": "add"}, {"from": 2, "to": 7, "type": "add"}, {"from": 5, "to": 7, "type": "concat"}]}, {"node_list": [128, 128, 128, 128, 512, 512, 64], "skip_list": [{"from": 2, "to": 4, "type": "concat"}, {"from": 2, "to": 4, "type": "add"}, {"from": 2, "to": 6, "type": "add"}, {"from": 3, "to": 6, "type": "add"}, {"from": 4, "to": 6, "type": "concat"}]}, {"node_list": [128, 128, 128, 256, 128, 128, 128, 64], "skip_list": [{"from": 2, "to": 7, "type": "add"}, {"from": 3, "to": 4, "type": "concat"}, {"from": 3, "to": 4, "type": "add"}, {"from": 3, "to": 7, "type": "add"}, {"from": 4, "to": 7, "type": "concat"}]}, {"node_list": [128, 128, 128, 128, 128, 128, 128, 128, 64], "skip_list": [{"from": 3, "to": 7, "type": "concat"}, {"from": 3, "to": 7, "type": "add"}, {"from": 3, "to": 8, "type": "add"}, {"from": 7, "to": 8, "type": "concat"}]}, {"node_list": [256, 256, 128, 128, 128, 128, 256, 128, 64], "skip_list": [{"from": 2, "to": 4, "type": "concat"}, {"from": 2, "to": 4, "type": "add"}, {"from": 2, "to": 8, "type": "add"}, {"from": 4, "to": 8, "type": "concat"}]}, {"node_list": [128, 128, 128, 128, 64], "skip_list": [{"from": 1, "to": 3, "type": "concat"}, {"from": 1, "to": 3, "type": "add"}, {"from": 1, "to": 4, "type": "add"}, {"from": 3, "to": 4, "type": "concat"}, {"from": 3, "to": 4, "type": "add"}]}, {"node_list": [128, 128, 128, 128, 128, 128, 128, 128, 64], "skip_list": [{"from": 4, "to": 5, "type": "concat"}, {"from": 4, "to": 5, "type": "add"}, {"from": 4, "to": 8, "type": "add"}, {"from": 5, "to": 8, "type": "concat"}]}, {"node_list": [128, 128, 128, 128, 128, 128, 128, 128, 64], "skip_list": [{"from": 4, "to": 5, "type": "concat"}, {"from": 4, "to": 5, "type": "add"}, {"from": 4, "to": 8, "type": "add"}, {"from": 5, "to": 8, "type": "concat"}]}, {"node_list": [128, 128, 128, 256, 128, 128, 64], "skip_list": [{"from": 3, "to": 4, "type": "concat"}, {"from": 3, "to": 5, "type": "concat"}, {"from": 3, "to": 5, "type": "add"}, {"from": 3, "to": 6, "type": "add"}, {"from": 5, "to": 6, "type": "concat"}]}, {"node_list": [128, 128, 128, 128, 128, 128, 64], "skip_list": [{"from": 3, "to": 5, "type": "concat"}, {"from": 3, "to": 5, "type": "add"}, {"from": 3, "to": 6, "type": "add"}, {"from": 5, "to": 6, "type": "concat"}]}, {"node_list": [128, 128, 128, 128, 128, 64], "skip_list": [{"from": 2, "to": 3, "type": "concat"}, {"from": 2, "to": 3, "type": "add"}, {"from": 2, "to": 5, "type": "add"}, {"from": 3, "to": 5, "type": "concat"}, {"from": 4, "to": 5, "type": "add"}]}, {"node_list": [256, 256, 128, 128, 128, 64], "skip_list": [{"from": 1, "to": 5, "type": "concat"}, {"from": 2, "to": 3, "type": "concat"}, {"from": 2, "to": 3, "type": "add"}, {"from": 2, "to": 5, "type": "add"}, {"from": 3, "to": 5, "type": "concat"}]}, {"node_list": [512, 256, 256, 256, 128, 64], "skip_list": [{"from": 1, "to": 4, "type": "concat"}, {"from": 2, "to": 4, "type": "concat"}, {"from": 2, "to": 4, "type": "add"}, {"from": 2, "to": 5, "type": "add"}, {"from": 4, "to": 5, "type": "concat"}]}], "tree": {"name": 0, "children": [{"name": 1, "children": []}, {"name": 2, "children": [{"name": 4, "children": []}, {"name": 5, "children": []}, {"name": 6, "children": []}, {"name": 7, "children": []}, {"name": 8, "children": []}, {"name": 9, "children": []}, {"name": 10, "children": []}, {"name": 11, "children": []}, {"name": 12, "children": [{"name": 34, "children": []}]}, {"name": 13, "children": []}, {"name": 14, "children": []}, {"name": 15, "children": []}, {"name": 16, "children": []}, {"name": 17, "children": []}, {"name": 18, "children": []}, {"name": 19, "children": []}, {"name": 20, "children": []}, {"name": 21, "children": []}, {"name": 22, "children": []}, {"name": 23, "children": []}, {"name": 24, "children": []}, {"name": 25, "children": []}, {"name": 26, "children": []}, {"name": 27, "children": []}, {"name": 28, "children": []}, {"name": 29, "children": []}, {"name": 30, "children": []}, {"name": 31, "children": []}, {"name": 32, "children": []}, {"name": 33, "children": [{"name": 35, "children": []}, {"name": 36, "children": []}, {"name": 37, "children": []}, {"name": 38, "children": []}, {"name": 39, "children": []}, {"name": 40, "children": []}, {"name": 41, "children": []}, {"name": 42, "children": []}, {"name": 43, "children": []}, {"name": 44, "children": []}, {"name": 45, "children": []}, {"name": 46, "children": []}, {"name": 47, "children": []}, {"name": 48, "children": []}]}]}, {"name": 3, "children": []}]}};
var networks = data['networks'];
var treeData = data['tree'];

for (var i = 0; i < networks.length; i++) {
    networks[i]['node_list'].unshift(0);
    networks[i]['node_list'].push(0);
}

var name = "architecture";
var svg = d3.select("#network")
marker(svg, "black");
draw_network(networks[0], svg);

// var networks = [
//   {node_list: [0, 5, 8, 9], skip_list: [{from: 0, to: 2, id: 0}, {from: 1, to: 3, id: 1}]},
//   {node_list: [1, 5, 8, 9], skip_list: [{from: 0, to: 2, id: 0}, {from: 1, to: 3, id: 1}]},
//   {node_list: [2, 5, 8, 9], skip_list: [{from: 0, to: 2, id: 0}, {from: 1, to: 3, id: 1}]},
//   {node_list: [3, 5, 8, 9], skip_list: [{from: 0, to: 2, id: 0}, {from: 1, to: 3, id: 1}]},
//   {node_list: [4, 5, 8, 9], skip_list: [{from: 0, to: 2, id: 0}, {from: 1, to: 3, id: 1}]}
//   ]
// clean();
// draw_network(network_json, svg);

function clean() {
  $("#architecture").remove();
}

function draw_network(network_json, svg) {
  var network = new Network(50, 50, network_json['node_list'], name);

  for (var i = 0; i < network_json['skip_list'].length; i++) {
    var link = network_json['skip_list'][i];
    network.skip(link['from'], link['to'], "black");
  }
  network.draw(svg);
}


// var treeData =
//   {
//     "name": 0,
//     "children": [
//       {
//         "name": 1,
//         "children": [
//           { "name": 2 },
//           { "name": 3 }
//         ]
//       },
//       { "name": 4 }
//     ]
//   };

// Set the dimensions and margins of the diagram
var margin = {top: 20, right: 90, bottom: 30, left: 90},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

// append the svg object to the body of the page
// appends a 'group' element to 'svg'
// moves the 'group' element to the top left margin
var svg = d3.select("#tree")
    .attr("width", width + margin.right + margin.left)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate("
          + margin.left + "," + margin.top + ")");

var tree = new Tree(treeData);
tree.draw(svg);





function update_network(name) {
  clean();
  draw_network(networks[name], d3.select("#network"));
}
